## Karşılaşılabilecek Diğer Terimler

RAID ayarları yaparken veya hakkında okurken karşılaşabileceğiniz bazı terimleri bu bölüm dahilinde kullanma ihtiyacı hissetmedik. RAID mekanizmasının anlatımında doğrudan ihtiyaç duyulmayan ancak yardımcı bir takım terimler oldukları için, karşılaştığınızda yabancılık çekmemek adına bazılarını yazma ihtiyacı hissettik.

**Physical/Virtual Disk:** Adından anlaşılacağı üzere fiziksel ve sanal disklerdir. Fiziksel diskler, RAID kartına bağladığınız disklerdir. Bu diskler kullanılarak oluşturduğunuz bir RAID dizisine ise sanal disk adı verilir. Örneğin 3 diskten bir RAID 5 dizisi oluşturmak isterseniz, 3 fiziksel disk kullanıp bir sanal disk oluşturmuş olursunuz. Eğer bu RAID 5 dizisini 4 diske genişletmek isterseniz de, 4. diski ilgili sanal diske eklemeniz gerekir. Bu durumda sistemdeki fiziksel disk sayısı artmış olur ancak sanal disk sayısı sabit kalır.

**JBOD:** Just A Bunch Of Disks. RAID kartları veya storage'lar üzerine bir takımlar diskler taktığımızda ancak bunlar üzerinde _herhangi bir RAID mekanizması_ kurmadığımızda, bu diskler sadece bir yığın disk olarak dururlar ve sistem tarafından erişilebilir olurlar. Bu yüzden bunlara kısaca JBOD denilmektedir.

**Hot Swap:** Bu aslında storage veya sunucunuzun desteklediği bir yapıdır. Sistem çalışırken sisteme yeni diskler takılıp sökülebilmesini ifade etmektedir. Kısacası sistem _hot_ iken _disk swap_ yapabildiğimizin göstergesidir. Genellikle fiziksel RAID kontrol kartı bulunan sunucular ve hemen her storage bunu destekler. Özellikle disklerden birinin bozulması durumunda RAID yapısının tamir edilirken sistemin kesintiye uğramaması için önemlidir.

**Prepare Remove: **Hot swap destekleyen bir sistemde, bir diski sökmeden önce bu diski sökeceğinizi cihaza bildirebilirsiniz. Böylece kartlar o disk üzerinde işlem yapmayı durdurur, diskin spin işlemleri yavaşlatılarak duraklatılır. Eğer böyle bir işlemi kartınız destekliyorsa, fiziksel diskin sağlığı ve açısından yapmanızda fayda var.

**Hot Standby:** Bazen _hot spare_ ismi de alır. Bir RAID dizisi kurarken, disklerden birisinin arızalanması durumunda yedekte duran bir diskin otomatik olarak kullanılmasını sağlayabilirsiniz. Örneğin 2 diskten oluşan bir RAID 1 diziniz varsa, 3. bir disk takıp bu dizi için kendisini _hot standby_ olarak ayarlarsanız, RAID 1 disklerinden birisi bozulduğu takdirde, sistem hot stanby diskini kullanarak sağlıklı çalışmaya devam edecektir. Bu durumda mühendisin tek  sorumluluğu bozuk diski sökmek \(ve problemin neden kaynaklandığını incelemek\) olacaktır. Bazı durumlarda diski sunucu üzerinde bırakıp, otomatik tamir ayarı yapılmaması durumuna c_old standby_ denilmektedir. Öte yandan cold standby terimi bazı durumlarda "müdahale için sistemin kapatılması gerektiği" anlamına da gelmektedir. Kısacası hot swap desteklemeyen sistemler için rafta bekletilen disklere de cold standby denildiğiyle karşılaşabilirsiniz.

**Revertible Hot Spare: **Bazı sistemlerde hot spare diskinin "geçici" olarak kullanılmasını sağlamaktadır. Örneğin RAID 1 dizimiz bir revertible hot spare ile çalışıyorsa, RAID 1 disklerinden birinin bozulması durumunda hemen yedek disk devreye girer ve üzerine bütün veriler kopyalanır. Bozuk disk mühendis tarafından değiştirildiği takdirde, RAID kartı hot spare disk üzerindeki verileri yeni diske kopyalar ve hot spare diski yine _yedek disk_ olarak çalışmaya devam eder.

**Rebuild:** İlgili fiziksel diskin yeniden inşa edilmesi anlamına gelir. Ancak yedeklilik sağlayan sistemlerde yapılabilir. Örneğin RAID 0 sistemlerde bir diski rebuild edemezsiniz çünkü verilerin bir eşleniği başka diskte bulunmaz veya hesaplanamaz. Öte yandan RAID 1 veya RAID 5 dizilerde bir diski yeniden inşa edebilirsiniz. Bu işlemlerde inşa edeceğiniz disk haricindeki bütün disklerin sağlıklı durumda olduğuna dikkat edin.

**Scrubbing: **Yazılan verilerin tutarlılığını periyodik aralıklarla veya talep edildiği takdirde kontrol etmesi ve düzeltmesi işlemidir. Aslında iki tip scrubbing vardır.

**RAID Scrubbing: **RAID scrubbing, adı üstünde RAID kartı tarafından yapılan işlemdir. Bir verinin tutarlılığının birden fazla elemana bağlı olarak ölçülebildiği durumlarda işe yarar. Örneğin 3 diskli bir RAID 5 dizisinde, elemanların tamamı çalışıyorsa olsa bile XOR işleminin tutarlı sonuç verip vermediği incelenir. Tutarsız bir durumla karşılaşılması durumunda 2 disk doğru, 1 disk yanlış sonuç veriyor olabilir, bu durumda yanlış sonuç veren diskteki veri yeniden hesaplanır. RAID 1 gibi sistemlerde maalesef mümkün değildir çünkü veri iki diske birden kopyalanır. Disklerden birisinde ilgili bölümün bozuk olması halinde hangi diskteki verinin doğru olduğu anlaşılamaz. Bu yüzden RAID scrubbing çoğunlukla RAID 4, RAID5, RAID 6 gibi RAID seviyelerinde gerçekleştirilebilir.

**File System Scrubbing:** Bu işlem, işletim sistemi seviyesinde gerçekleşir. Bu yüzden RAID kartları doğrudan bu işlemi desteklemez ancak bazı storage cihazları destekleyebilir. Genellikle Btrfs veya ZFS dosya sistemlerinde gerçekleştirilir.

## RAID Mekanizmaları Hakkında Bir Takım Notlar

Bu bölümde RAID mekanizmalarının nasıl çalıştığını, farklılıklarını ve özellikle bir RAID kartı üzerinde konfigürasyon yapıldığında karşılaşılabilecek önemli ayarların ne işe yaradığını, bazı iç mekanizmaların çalışma prensiplerini irdeledik. Konu her ne kadar burada anlatıldığından çok daha kapsamlı olsa da, bu bölümde öğrendikleriniz sisteminizi kurarken bilinçli RAID yapıları oluşturmanıza yeterli olacaktır.

Burada anlatılanlar dışındaki RAID yapıları, burada anlatılan temel felsefelere dayanmaktadır ve bu bölümdeki kavramları anladıysanız diğer sistemler hakkında okuma yaptığınızda problem yaşamayacaksınızdır.

Örneğin RAID 4 ve RAID 5'in nasıl çalıştığını anladıysanız, RAID 6'nın "bir tane daha parity disk sağlayabilmek için XOR dışında bir matematiksel işlem daha sağladığı" bilgisi yeterli olacaktır. Bu sayede RAID 6'nın RAID 5'ten farkının 2 disk çökmesine izin verdiği ortaya çıkar. XOR işlemini zaten parity disklerinden birinde kullandığımız için farklı bir işlem kullanılır \(Galois Field Computation\) ve bu kitabın kapsamı dışında olduğu için anlatılmamıştır, ancak felsefe aynı.

Benzer şekilde RAID 10'un nasıl bir şey olduğunu, RAID 5'in nasıl bir şey olduğunu anladıysak, RAID 50'nin nasıl oluşturulduğunu rahat bir biçimde anlayabiliriz.

Her ne kadar burada RAID kartları açısından bir anlatım sunduysak da, storage cihazlarının da aslında RAID kartı ve bir sürü disk barındıran sunucular gibi davrandığını unutmamak gerekir. Kısacası burada öğrendiklerimiz storage cihazlarını konfigüre ederken de karşımıza çıkmaktadır.

Hem yazma, hem de okuma cache'leme mekanizmalarında kart üreticileri farklı stratejiler veya farklı ayarlar sunabilmektedir. Örneğin bazı RAID kartları veya storage cihazları RAID kartının cache'si dışında, içindeki disklerin cache'lerinin kullanılma politikaları hakkında ayarlar sunmaktadır. Veya bazı modeller storage içerisine iki tane SSD disk koyup bu diskleri RAID 1 yapıp, storage cihazının cache alanı olarak kullanılmasına olanak sağlamaktadır. Böylece biraz daha yavaş ancak çok daha büyük cache alanına sahip olunabilir. Marka ve modellere özel bu tip çözümlerin isimlendirmeleri farklı olabilir ve bazı özellikleri ek lisanslar gerektirebilir. Ancak kullanılan stratejiler bu bölümde anlattıklarımızla paralellik göstermektedir.

RAID yapıların birden fazla diske \(çoğunlukla ilişkilendirilmiş\) veri yazmaktan sorumlu olduğunu unutmayın. Özellikle veri yazmak, veri okumaktan çok daha hassas bir işlemdir ve işlemin yarıda kalması veya bozuk yapılması, tamir edilemez hasarlara sebep olabilir. Bu yüzden RAID kartınızın veya storage cihazınızın hangi özellikleri desteklediğine, hangi fiziksel olanaklara imkan tanıdığına hakim olun. RAID kartınızda pil olup olmadığını, varsa pilin ömrünün ne kadar olduğunu, dolayısıyla kullandığınız cache'leme mekanizmasına göre ne kadar süreli bir elektrik kesintisini etkilenmeden atlatabileceğinizi bilmenizde fayda var. Ayrıca bazı RAID kartları veya storage cihazları ortaklık \(_partnership_\) kurabilmektedir. Böylece aynı marka/model iki storage cihazı birbirine bağlandığı takdirde, ortak cache alanları kullanabilmekte, veya cache'leri mirror edip birinin bozulması durumunda diğeri üzerinden işlemlerine devam edebilmektedir.

RAID mekanizmaları genellikle sistem kurulduğunda üzerine çalışılan, sonra problem çıkmadıkça uzun süre giriş yapılmayan bölümlerdir. Dolayısıyla kontrol mekanizmanızın uzaktan erişimi varsa giriş bilgilerini not edin, sisteminize nasıl bir yapı kurduğunuzu hatırlayın, ve destekliyorsa bozulma/alarm durumlarında size uyarı mesajları \(email\) gönderebildiğinden emin olun, uyarı mekanizmalarını test edin.

RAID yapınızı kurmadan önce, büyüme/küçülme planlarınızı göz önünde bulundurun ve kartlarınızın planlarınızı destekleyip desteklemediğini gözden geçirin. Örneğin birçok kart RAID 1 için 2'den fazla disk desteklememektedir. Bazı kartlar RAID 1'den RAID 5 veya RAID 10 gibi yapılara doğrudan göç etmenize olanak sağlamaktadır. Bu kartlarda RAID 1 dizinize yeni bir disk ekleyip "bu diziyi RAID 5'e çevir" dediğinizde gerekli işlemlere başlar ve veri kaybı yaşamazsınız. Öte yandan bazı kartlar buna izin vermez, yeni bir RAID 5 dizisi oluşturup verilerinizi _elle_ bu yeni diziye taşımanız gerekebilir.

Son olarak, daha önce belirttiğimiz gibi, RAID'in bir _yedekleme_ mekanizması olmadığını unutmayın. Geçmişe dönük verilerinizin yedeğini alın, ve bunu RAID sistemler üzerinde tutun. Ancak RAID'in amacı yedekleme yapmak değildir, güvenilir ve verimli ortamlar sağlamaktır.

