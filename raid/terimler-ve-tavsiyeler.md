# RAID Terimleri ve Tavsiyeler

Bu bölümde, RAID ile ilgili sıkça karşılaşılan bazı ek terimler açıklanacak ve genel yönetim tavsiyeleri sunulacaktır.

## Karşılaşılabilecek Diğer Terimler

**Physical/Virtual Disk:** Adından anlaşılacağı üzere fiziksel ve sanal disklerdir. Fiziksel diskler, RAID kartına bağladığınız disklerdir. Bu diskler kullanılarak oluşturduğunuz bir RAID dizisine ise sanal disk adı verilir. Örneğin 3 diskten bir RAID 5 dizisi oluşturmak isterseniz, 3 fiziksel disk kullanıp bir sanal disk oluşturmuş olursunuz. Eğer bu RAID 5 dizisini 4 diske genişletmek isterseniz de, 4. diski ilgili sanal diske eklemeniz gerekir. Bu durumda sistemdeki fiziksel disk sayısı artmış olur ancak sanal disk sayısı sabit kalır.

**JBOD:** Just A Bunch Of Disks. RAID kartları veya storage'lar üzerine bir takımlar diskler taktığımızda ancak bunlar üzerinde _herhangi bir RAID mekanizması_ kurmadığımızda, bu diskler sadece bir yığın disk olarak dururlar ve sistem tarafından erişilebilir olurlar. Bu yüzden bunlara kısaca JBOD denilmektedir.

**Hot Swap:** Bu aslında storage veya sunucunuzun desteklediği bir yapıdır. Sistem çalışırken sisteme yeni diskler takılıp sökülebilmesini ifade etmektedir. Kısacası sistem _hot_ iken _disk swap_ yapabildiğimizin göstergesidir. Genellikle fiziksel RAID kontrol kartı bulunan sunucular ve hemen her storage bunu destekler. Özellikle disklerden birinin bozulması durumunda RAID yapısının tamir edilirken sistemin kesintiye uğramaması için önemlidir.

**Prepare Remove:** Hot swap destekleyen bir sistemde, bir diski sökmeden önce bu diski sökeceğinizi cihaza bildirebilirsiniz. Böylece kartlar o disk üzerinde işlem yapmayı durdurur, diskin spin işlemleri yavaşlatılarak duraklatılır. Eğer böyle bir işlemi kartınız destekliyorsa, fiziksel diskin sağlığı ve açısından yapmanızda fayda var.

**Hot Standby:** Bazen _hot spare_ ismi de alır. Bir RAID dizisi kurarken, disklerden birisinin arızalanması durumunda yedekte duran bir diskin otomatik olarak kullanılmasını sağlayabilirsiniz. Örneğin 2 diskten oluşan bir RAID 1 diziniz varsa, 3. bir disk takıp bu dizi için kendisini _hot standby_ olarak ayarlarsanız, RAID 1 disklerinden birisi bozulduğu takdirde, sistem hot stanby diskini kullanarak sağlıklı çalışmaya devam edecektir. Bu durumda mühendisin tek sorumluluğu bozuk diski sökmek (ve problemin neden kaynaklandığını incelemek) olacaktır. Bazı durumlarda diski sunucu üzerinde bırakıp, otomatik tamir ayarı yapılmaması durumuna c_old standby_ denilmektedir. Öte yandan cold standby terimi bazı durumlarda "müdahale için sistemin kapatılması gerektiği" anlamına da gelmektedir. Kısacası hot swap desteklemeyen sistemler için rafta bekletilen disklere de cold standby denildiğiyle karşılaşabilirsiniz.

**Revertible Hot Spare:** Bazı sistemlerde hot spare diskinin "geçici" olarak kullanılmasını sağlamaktadır. Örneğin RAID 1 dizimiz bir revertible hot spare ile çalışıyorsa, RAID 1 disklerinden birinin bozulması durumunda hemen yedek disk devreye girer ve üzerine bütün veriler kopyalanır. Bozuk disk mühendis tarafından değiştirildiği takdirde, RAID kartı hot spare disk üzerindeki verileri yeni diske kopyalar ve hot spare diski yine _yedek disk_ olarak çalışmaya devam eder.

**Rebuild:** İlgili fiziksel diskin yeniden inşa edilmesi anlamına gelir. Ancak yedeklilik sağlayan sistemlerde yapılabilir. Örneğin RAID 0 sistemlerde bir diski rebuild edemezsiniz çünkü verilerin bir eşleniği başka diskte bulunmaz veya hesaplanamaz. Öte yandan RAID 1 veya RAID 5 dizilerde bir diski yeniden inşa edebilirsiniz. Bu işlemlerde inşa edeceğiniz disk haricindeki bütün disklerin sağlıklı durumda olduğuna dikkat edin.

**Scrubbing (Tarama/Temizleme):** RAID dizisindeki verilerin tutarlılığını periyodik olarak kontrol etme ve hataları (varsa ve mümkünse) düzeltme işlemidir. Özellikle uzun süre erişilmeyen verilerdeki "sessiz bozulmaları" (bit rot) tespit etmek için önemlidir.
    *   **RAID Scrubbing:** Donanımsal RAID kartları veya yazılımsal RAID (`mdadm` - `check` işlemi) tarafından yapılır. Parity tabanlı RAID seviyelerinde (RAID 5, 6) veya mirror'larda (RAID 1) disklerdeki verilerin birbiriyle veya parity bilgisiyle tutarlı olup olmadığını kontrol eder. Tutarsızlık bulunursa, genellikle düzeltmeye çalışır.
    *   **File System Scrubbing:** Dosya sistemi seviyesinde yapılır (örn. ZFS `scrub`, Btrfs `scrub`). Dosya sisteminin kendi checksum bilgilerini kullanarak veri bloklarının bütünlüğünü doğrular. RAID scrubbing'den farklı olarak, dosya sistemi yapısındaki hataları da tespit edebilir. ZFS gibi sistemlerde, RAID-Z veya mirror ile birlikte kullanıldığında bozuk veriyi otomatik olarak düzeltebilir (self-healing).

## Genel Tavsiyeler ve Notlar

*   **RAID Seviyesi Seçimi:** İhtiyaçlarınıza (performans, kapasite, güvenilirlik, bütçe) en uygun RAID seviyesini seçin. Genel amaçlı sunucular için RAID 10 (performans+güvenilirlik) veya RAID 6 (yüksek kapasite+güvenilirlik) sıkça tercih edilir. RAID 5, büyük disklerdeki rebuild riski nedeniyle daha az önerilmektedir. RAID 0 sadece hızın önemli olduğu ve veri kaybının kabul edilebilir olduğu durumlarda kullanılmalıdır.
*   **Donanımsal vs Yazılımsal RAID:** Donanımsal RAID genellikle daha yüksek performans sunar ve CPU yükünü azaltır, ancak maliyetlidir ve belirli bir üreticiye bağımlılık yaratabilir. Yazılımsal RAID (`mdadm`, ZFS RAID-Z) daha esnek ve ucuzdur, ancak CPU kullanır ve performansı donanıma göre değişebilir. ZFS RAID-Z, geleneksel RAID 5/6'daki "write hole" sorununa karşı koruma sağlar.
*   **Disk Seçimi:** RAID dizisinde kullanılacak disklerin aynı kapasitede, hızda ve mümkünse aynı modelde olması önerilir. Farklı diskler kullanılabilir ancak performans ve kapasite genellikle en yavaş/küçük diske göre belirlenir.
*   **Yedekleme:** **RAID bir yedekleme çözümü değildir!** Disk arızalarına karşı koruma sağlar ancak veri silinmesi, yazılım hatası, virüs, doğal afet gibi durumlara karşı korumaz. RAID ile birlikte mutlaka düzenli bir yedekleme stratejisi uygulanmalıdır.
*   **İzleme (Monitoring):** RAID dizisinin durumunu düzenli olarak izlemek kritik öneme sahiptir. Donanımsal RAID kartlarının kendi yönetim araçları, yazılımsal RAID için ise `mdadm --detail /dev/mdX` veya `zpool status` gibi komutlar kullanılmalıdır. SMART verileri (`smartctl`) ile disklerin sağlık durumu takip edilmelidir. Hata veya uyarı durumlarında (örn. disk arızası, rebuild başlangıcı/bitişi) e-posta veya başka yöntemlerle bildirim alınacak şekilde sistemler yapılandırılmalıdır.
*   **Hot Spare:** Kritik sistemlerde, arızalanan bir diskin yerine otomatik olarak geçecek bir yedek disk (hot spare) bulundurmak, rebuild işleminin hemen başlamasını sağlayarak veri kaybı riskini azaltır.
*   **Cache ve BBU:** Donanımsal RAID kartı kullanılıyorsa, Write-Back cache modunun performansa büyük katkısı vardır ancak veri kaybı riskini önlemek için mutlaka çalışan bir BBU (Pil Yedekleme Birimi) veya kapasitör ile birlikte kullanılmalıdır. BBU'nun durumu düzenli olarak kontrol edilmelidir.
*   **Planlama:** RAID yapısını kurmadan önce gelecekteki büyüme ihtiyaçlarını göz önünde bulundurun. Bazı RAID seviyelerinin (örn. RAID 10, RAID 1) genişletilmesi, diğerlerine (örn. RAID 5, 6) göre daha kolay veya zor olabilir. RAID seviyesi değiştirme işlemleri genellikle veri yedeklemesi ve yeniden kurulum gerektirir.

RAID, depolama altyapısının güvenilirliğini ve performansını artırmak için güçlü bir araçtır, ancak temel prensiplerini, farklı seviyelerin avantaj/dezavantajlarını ve yönetim gereksinimlerini anlamak önemlidir.
